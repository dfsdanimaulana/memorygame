(this["webpackJsonpmemorygame-twice"]=this["webpackJsonpmemorygame-twice"]||[]).push([[0],{26:function(e,t,c){},27:function(e,t,c){},28:function(e,t,c){},30:function(e,t,c){},31:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},53:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(21),r=c.n(s),i=(c(26),c(5)),l=c(7),o=c(4),j=c(2),u=(c(27),c(28),c(0));function d(e){var t=e.card,c=e.handleChoice,n=e.flipped,a=e.disabled;return Object(u.jsx)("div",{className:"card",children:Object(u.jsxs)("div",{className:n?"flipped":"",children:[Object(u.jsx)("img",{src:t.src,alt:"front",className:"front"}),Object(u.jsx)("img",{src:"../../img/cover.jpg",onClick:function(){a||c(t)},alt:"back",className:"back"})]})})}c(30);function b(){return Object(u.jsxs)("div",{className:"level-grid",children:[Object(u.jsxs)("div",{className:"level-card",children:[Object(u.jsx)("img",{src:"/img/cover.jpg",alt:"level"}),Object(u.jsx)("img",{src:"/img/locked.png",alt:"locked",className:"locked"}),Object(u.jsx)("h5",{children:"Level 1"})]}),Object(u.jsxs)("div",{className:"level-card",children:[Object(u.jsx)("img",{src:"/img/cover.jpg",alt:"level"}),Object(u.jsx)("img",{src:"/img/locked.png",alt:"locked",className:"locked"}),Object(u.jsx)("h5",{children:"Level 2"})]}),Object(u.jsxs)("div",{className:"level-card",children:[Object(u.jsx)("img",{src:"/img/cover.jpg",alt:"level"}),Object(u.jsx)("img",{src:"/img/locked.png",alt:"locked",className:"locked"}),Object(u.jsx)("h5",{children:"Level 3"})]})]})}c(31);function O(e){var t=e.user,c=e.gamePoint;return Object(u.jsxs)("div",{id:"profile-card",children:[Object(u.jsx)("img",{src:"/avatar/".concat(null===t||void 0===t?void 0:t.avatar),alt:"avatar"}),Object(u.jsxs)("div",{className:"username",children:[Object(u.jsx)("div",{children:null===t||void 0===t?void 0:t.username}),Object(u.jsx)("div",{className:"level",children:"1"})]}),Object(u.jsxs)("div",{className:"point",children:[Object(u.jsxs)("label",{children:["point :",Object(u.jsxs)("span",{children:[null===t||void 0===t?void 0:t.point," ",c]})]}),Object(u.jsx)("input",{type:"range",name:"point",id:"point",max:"10000",disabled:!0,defaultValue:null===t||void 0===t?void 0:t.point})]})]})}var m=c(8),h=c.n(m),p=function(e,t){var c=Object(n.useState)(null),a=Object(j.a)(c,2),s=a[0],r=a[1],o=Object(n.useState)(!1),u=Object(j.a)(o,2),d=u[0],b=u[1],O=Object(n.useState)(null),m=Object(j.a)(O,2),p=m[0],x=m[1];return Object(n.useEffect)((function(){var t=new AbortController,c=function(){var c=Object(l.a)(Object(i.a)().mark((function c(){var n;return Object(i.a)().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return b(!0),c.prev=1,c.next=4,h.a.get(e,{signal:t.signal});case 4:n=c.sent,b(!1),r(n.data),x(null),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(1),"AbortError"===c.t0.name?console.log("the fetch was aborted"):(b(!1),x("Could not fetch the data"));case 13:case"end":return c.stop()}}),c,null,[[1,10]])})));return function(){return c.apply(this,arguments)}}();return c(),function(){t.abort()}}),[e,t]),{data:s,isPending:d,error:p}};c(50);function x(e){var t=e.children,c=e.handleModal;return Object(u.jsx)("div",{className:"modal-backdrop",children:Object(u.jsxs)("div",{className:"modal",children:[Object(u.jsx)("button",{className:"close-modal",onClick:c,children:"x"}),t]})})}var f=c(11),v=(c(51),["mina","sana","jihyo","momo","tzuyu","dahyun","nayeon","jeongyeon","chaeyoung","twice","once","teudoongie"]);function g(e){var t=e.url,c=e.updateUser,a=Object(n.useState)({username:"",password:"",check_password:""}),s=Object(j.a)(a,2),r=s[0],d=s[1],b=Object(n.useState)(!1),O=Object(j.a)(b,2),m=O[0],p=O[1],x=Object(n.useState)(!1),g=Object(j.a)(x,2),N=g[0],k=g[1],w=Object(n.useState)(null),y=Object(j.a)(w,2),S=y[0],C=y[1],T=function(e){C(!1);var t=e.target,c=t.id,n=t.value;d((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(f.a)({},c,n))}))},L=function(){var e=Object(l.a)(Object(i.a)().mark((function e(n){var a,s,l,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!v.includes(r.username)){e.next=4;break}return C("please don't use twice name \ud83d\ude0a"),e.abrupt("return");case 4:if(!m){e.next=8;break}if(r.password===r.check_password){e.next=8;break}return C("wrong check password"),e.abrupt("return");case 8:return k(!0),a="".concat(t,m?"/user":"/user/login"),e.prev=10,e.next=13,h.a.post(a,r);case 13:s=e.sent,k(!1),c(s.data),p(!1),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(10),console.log(e.t0),k(!1),C(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message);case 24:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{id:"form-container",children:[m?Object(u.jsx)("h3",{children:"Register"}):Object(u.jsx)("h3",{children:"Log in"}),N&&Object(u.jsx)("p",{className:"form-error",children:"Loading..."}),S&&Object(u.jsx)("p",{className:"form-error",children:S}),Object(u.jsxs)("form",{className:"login-form",onSubmit:L,children:[Object(u.jsx)("input",{id:"username",className:"login-input",type:"text",onChange:T,autoComplete:"off",autoFocus:!0,placeholder:"username",required:!0}),Object(u.jsx)("input",{id:"password",className:"login-input",type:"password",onChange:T,placeholder:"password",required:!0}),m&&Object(u.jsx)("input",{id:"check_password",className:"login-input",onChange:T,type:"password",placeholder:"check password",required:!0}),Object(u.jsx)("button",{className:"log login-button",type:"submit",children:"Submit"}),m?Object(u.jsxs)("div",{className:"other",children:["have account ? login",Object(u.jsx)("span",{onClick:function(){return p(!1)},children:" here"})]}):Object(u.jsxs)("div",{className:"other",children:["new user ? create account",Object(u.jsx)("span",{onClick:function(){return p(!0)},children:" here"})]})]})]})}c(52);function N(e){var t=e.users,c=e.topTurn,a=e.topTime,s=Object(n.useState)(!0),r=Object(j.a)(s,2),i=r[0],l=r[1],o=Object(n.useState)(!1),d=Object(j.a)(o,2),b=d[0],O=d[1],m=Object(n.useState)(!1),h=Object(j.a)(m,2),p=h[0],x=h[1];return Object(u.jsxs)("div",{id:"board-container",children:[Object(u.jsxs)("div",{className:"button-group",children:[Object(u.jsx)("button",{onClick:function(){l(!0),O(!1),x(!1)},children:"Top Player"}),Object(u.jsx)("button",{onClick:function(){l(!1),O(!0),x(!1)},children:"Time Records"}),Object(u.jsx)("button",{onClick:function(){l(!1),O(!1),x(!0)},children:"Turn Records"})]}),i&&Object(u.jsx)("div",{className:"board-list",children:Object(u.jsx)("ul",{children:t&&t.map((function(e,t){return Object(u.jsxs)("li",{className:"data-list",children:[Object(u.jsxs)("span",{children:[" ",t+1," "]}),Object(u.jsxs)("span",{children:[" ",e.username," "]}),Object(u.jsxs)("span",{children:[" ",e.point," pts "]})]},e._id)}))})}),b&&Object(u.jsx)("div",{className:"board-list",children:Object(u.jsx)("ul",{children:a&&a.map((function(e,t){return Object(u.jsxs)("li",{className:"data-list",children:[Object(u.jsxs)("span",{children:[" ",t+1," "]}),Object(u.jsxs)("span",{children:[" ",e.username," "]}),Object(u.jsxs)("span",{children:[" ",e.time,"s "]})]},e._id)}))})}),p&&Object(u.jsx)("div",{className:"board-list",children:Object(u.jsx)("ul",{children:c&&c.map((function(e,t){return Object(u.jsxs)("li",{className:"data-list",children:[Object(u.jsxs)("span",{children:[" ",t+1," "]}),Object(u.jsxs)("span",{children:[" ",e.username," "]}),Object(u.jsxs)("span",{children:[" ",e.turn," turns "]})]},e._id)}))})})]})}var k=[{src:"../../img/chaeyoung.jpeg",matched:!1},{src:"/img/dahyun.jpeg",matched:!1},{src:"/img/jeongyon.jpeg",matched:!1},{src:"/img/jihyo.jpeg",matched:!1},{src:"/img/mina.jpeg",matched:!1},{src:"/img/momo.jpeg",matched:!1},{src:"/img/nayeon.jpeg",matched:!1},{src:"/img/sana.jpeg",matched:!1},{src:"/img/tzuyu.jpeg",matched:!1}],w="http://localhost:3003";var y=function(){var e=Object(n.useState)(60),t=Object(j.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)([]),r=Object(j.a)(s,2),m=r[0],f=r[1],v=Object(n.useState)(0),y=Object(j.a)(v,2),S=y[0],C=y[1],T=Object(n.useState)({}),L=Object(j.a)(T,2),_=L[0],M=L[1],E=Object(n.useState)(!1),I=Object(j.a)(E,2),P=I[0],R=I[1],q=Object(n.useState)(null),A=Object(j.a)(q,2),z=A[0],F=A[1],J=Object(n.useState)(null),U=Object(j.a)(J,2),B=U[0],D=U[1],G=Object(n.useState)(""),V=Object(j.a)(G,2),H=V[0],K=V[1],Q=Object(n.useState)(!1),W=Object(j.a)(Q,2),X=W[0],Y=W[1],Z=Object(n.useState)(!1),$=Object(j.a)(Z,2),ee=$[0],te=$[1],ce=Object(n.useState)(!1),ne=Object(j.a)(ce,2),ae=ne[0],se=ne[1],re=Object(n.useState)(null),ie=Object(j.a)(re,2),le=ie[0],oe=ie[1],je=Object(n.useState)(!1),ue=Object(j.a)(je,2),de=ue[0],be=ue[1],Oe=Object(n.useState)(!1),me=Object(j.a)(Oe,2),he=me[0],pe=me[1],xe=Object(n.useRef)(null),fe=p("".concat(w,"/user/point"),_).data,ve=p("".concat(w,"/user/time"),_).data,ge=p("".concat(w,"/user/turn"),_).data;Object(n.useEffect)((function(){return Ne()}),[]),Object(n.useEffect)((function(){0!==m.length&&m.filter((function(e){return!1===e.matched})).length<1&&(ye(),Ce(),be(!0)),z&&B&&(R(!0),z.src===B.src?(f((function(e){return e.map((function(e){return e.src===z.src?Object(o.a)(Object(o.a)({},e),{},{matched:!0}):e}))})),Se()):setTimeout((function(){return Se()}),1e3))}),[z,B]),Object(n.useEffect)((function(){c<1&&(ye(),te(!0),R(!0))}),[c]);var Ne=function(){var e=[].concat(k,k).sort((function(){return Math.random()-.5})).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{id:Math.random()})}));R(!1),be(!1),ye(),a(60),te(!1),F(null),D(null),f(e),C(0)},ke=function(e){60===c&&we(),z?D(e):F(e)},we=function(){xe.current&&clearInterval(xe.current),xe.current=setInterval((function(){a((function(e){return e-1}))}),1e3)},ye=function(){clearInterval(xe.current)},Se=function(){R(!1),F(null),D(null),C((function(e){return e+1}))},Ce=function(){var e=100-S-c;K("+ ".concat(e));var t={username:null===le||void 0===le?void 0:le.username,newPoint:e,time:60-c,turn:S};try{setTimeout(Object(l.a)(Object(i.a)().mark((function c(){var n;return Object(i.a)().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,h.a.post("".concat(w,"/user/point"),t);case 2:n=c.sent,K(""),M(n),oe((function(t){var c=Object(o.a)({},t);return Object(o.a)(Object(o.a)({},c),{},{point:t.point+e})}));case 6:case"end":return c.stop()}}),c)}))),2e3)}catch(n){console.log(n)}},Te=function(){se(!0)},Le=function(){he?pe(!1):se(!ae)};return Object(u.jsxs)("div",{className:"App",children:[ae&&Object(u.jsx)(x,{handleModal:Le,children:X?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{children:"are you sure?"}),Object(u.jsx)("button",{onClick:function(){oe(null),Y(!1),Le(),Ne()},className:"log login-button",children:"log out"})]}):Object(u.jsx)(g,{url:w,updateUser:function(e){oe(e),Y(!0),Le()}})}),he&&Object(u.jsx)(x,{handleModal:Le,children:Object(u.jsx)(N,{users:fe,topTime:ve,topTurn:ge})}),Object(u.jsx)("div",{className:"board-button",children:Object(u.jsx)("button",{className:"log",onClick:function(){pe(!0)},children:"Scoreboard"})}),Object(u.jsx)("div",{className:"log-user",children:X?Object(u.jsx)("button",{className:"log",onClick:Te,children:"Log out"}):Object(u.jsx)("button",{className:"log",onClick:Te,children:"Log in"})}),Object(u.jsx)("h1",{children:"Twice Memory Game"}),!X&&Object(u.jsx)("h5",{children:"Log in to save your game progress"}),X&&Object(u.jsxs)("div",{className:"progress",children:[le&&Object(u.jsx)(O,{user:le,gamePoint:H}),Object(u.jsxs)("div",{className:"count",children:[Object(u.jsxs)("div",{children:["Turns: ",S]}),ee?Object(u.jsx)("div",{children:"Time Out!"}):Object(u.jsxs)("div",{children:["Timer: ",c,"s"]})]})]}),Object(u.jsx)("button",{onClick:Ne,className:"main-button",children:"new game"}),de&&Object(u.jsx)("p",{children:"game finish with ".concat(S," turns in ").concat(60-c," second")}),Object(u.jsx)("div",{className:"card-grid",children:m.map((function(e){return Object(u.jsx)(d,{card:e,handleChoice:ke,flipped:e===z||e===B||e.matched,disabled:P},e.id)}))}),Object(u.jsx)(b,{}),Object(u.jsxs)("footer",{children:[Object(u.jsx)("p",{children:"Copyright \xa9 2021"}),Object(u.jsxs)("p",{children:["Contact me",Object(u.jsx)("a",{href:"https://Instagram.com/dnm17_",children:"@dnm17_"})]})]})]})};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(y,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.99c85d42.chunk.js.map